{% extends 'layout.html.twig' %}

{% block breadcrumps %}
    <a href="{{ path('homepage') }}"><i class="material-icons">home</i></a> <i class="material-icons">chevron_right</i>
    <a href="{{ path('admin') }}"><i class="material-icons">tune</i>admin</a> <i class="material-icons">chevron_right</i>
    <a href="{{ path('period') }}"><i class="material-icons">date_range</i>Semaine type</a> <i class="material-icons">chevron_right</i>
    <i class="material-icons">add</i>Exception {{ exception.id }}
{% endblock %}

{% block content %}
    <h4 class="">Editer exception</h4>
    {{ form_start(form) }}
    {{ form_widget(form) }}
    <div>
        <button type="submit" class="btn waves-effect waves-light">Sauvegarder</button>
    </div>
    {{ form_end(form) }}

    {{ form_start(delete_form) }}
    {{ form_start(form) }}
    {{ form_widget(form.type) }}
    {{ form_widget(form.recurrence) }}
    {{ form_widget(form.job) }}

    <div class="row">
        <div class="col s6">
            <div class="errors">
                {{ form_errors(form.startDate) }}
            </div>
            <div class="input-field">
                {{ form_label(form.startDate) }}
                {{ form_widget(form.startDate.date, {'attr': {'class': 'datepicker'}}) }}
                {{ form_widget(form.startDate.time, {'attr': {'class': 'timepicker'}}) }}
            </div>
        </div>
        <div class="col s6">
            <div class="errors">
                {{ form_errors(form.endDate) }}
            </div>
            <div class="input-field">
                {{ form_label(form.endDate) }}
                {{ form_widget(form.endDate.date, {'attr': {'class': 'datepicker'}}) }}
                {{ form_widget(form.endDate.time, {'attr': {'class': 'timepicker'}}) }}
            </div>
        </div>
    </div>

    {{ form_rest(form) }}
    <div>
        <button type="submit" class="btn waves-effect waves-light red">Supprimer</button>
    </div>
    {{ form_end(delete_form) }}
{% endblock %}

{% block javascripts %}
    <script>
        function typeUpdated(element) {
            if (element.value === 'ADD') {
                $('.add-only').show();
                $('select.add-only').material_select();
                $('select.add-only ').hide();
            } else {
                $('select.add-only').material_select('destroy');
                $('.add-only').hide();
            }
        }

        jQuery(function() {
            // Hide by default add type specific exceptions
            $('select.add-only').material_select('destroy');
            $('.add-only').hide();

            $('.datepicker').pickadate({
                selectMonths: true, // Creates a dropdown to control month
                selectYears: 2, // Creates a dropdown of 15 years to control year,
                close: 'Ok',
                closeOnSelect: true // Close upon selecting a date,
            });

            $('.timepicker').pickatime({
                twelvehour: false, // Use AM/PM or 24-hour format
                donetext: 'OK', // text for done-button
                cleartext: 'Effacer', // text for clear-button
                canceltext: 'Fermer', // Text for cancel-button
                autoclose: true, // automatic close timepicker
                ampmclickable: false, // make AM PM clickable
            });
        });
    </script>
{% endblock %}